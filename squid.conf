acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 21
acl Safe_ports port 443
acl Safe_ports port 70
acl Safe_ports port 210
acl Safe_ports port 1025-65535
acl Safe_ports port 280
acl Safe_ports port 488
acl Safe_ports port 591
acl Safe_ports port 777
acl CONNECT method CONNECT

http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow all

visible_hostname squid
coredump_dir /var/spool/squid
cache_effective_user proxy
cache_effective_group proxy
cache_mem 500 MB
cache_dir ufs /var/spool/squid 10000 32 512
maximum_object_size 120 MB
shutdown_lifetime 1

ssl_bump none localhost
ssl_bump server-first all
sslproxy_cert_error allow all
sslproxy_flags DONT_VERIFY_PEER

http_port 3128
http_port 3129 intercept
https_port 3130 intercept ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=4MB cert=/etc/squid/ssl/cert.pem key=/etc/squid/ssl/cert.pem

always_direct allow all

http_access allow all